const qrForm=document.querySelector(".o_func"),fileUpload=document.getElementById("upload_def"),secHide=document.querySelector(".uploaded_qr_showing"),inftext=document.querySelector(".dg_info"),textAr=document.getElementById("display_inf"),img=document.getElementById("userqr"),copyBt=document.querySelector(".copy_qr"),newqrBt=document.querySelector(".new_qr");function fetchRequest(formData,uQrFile){inftext.classList.remove("err2"),inftext.innerText="Loading...",fetch("http://api.qrserver.com/v1/read-qr-code/",{method:"POST",body:formData}).then(res=>res.json()).then(result=>{res2=result[0].symbol[0].data,inftext.innerText=res2?"Click to upload QR Code":"No valid QR Code found!",inftext.classList.add("err2"),res2&&(img.src=URL.createObjectURL(uQrFile),textAr.innerText=res2,inftext.innerText="Click to upload QR Code",qrForm.classList.add("uploaded"),inftext.classList.remove("err2"),secHide.classList.remove("nonuploaded"))})}fileUpload.addEventListener("change",e=>{let uQrFile=e.target.files[0],formData=new FormData;formData.append("file",uQrFile),fetchRequest(formData,uQrFile)}),copyBt.onclick=()=>{let ctext=textAr.textContent;navigator.clipboard.writeText(ctext),copyBt.innerText="Copied!",setTimeout((function(){copyBt.innerText="Copy text"}),1e3)},newqrBt.onclick=()=>{qrForm.classList.remove("uploaded"),secHide.classList.add("nonuploaded")};
