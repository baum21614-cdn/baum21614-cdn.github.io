const tempe=document.getElementById("cond"),cond=document.getElementById("condtd");function apiPull(reqCity){const handleSuccess=pos=>{lat=pos.coords.latitude,lon=pos.coords.longitude;const posArr=[lat,lon];return posArr},handleError=()=>{displayError()};function locationData(c){const userCity=c.city,userRegion=c.region_code;let fString=`${userCity},&nbsp;${userRegion}&nbsp;|&nbsp;`;document.getElementById("userLoc").innerHTML=fString}function displayError(){let imgsrc="https://baum21614-cdn.github.io/imges/weather/undefined.svg";document.querySelector(".wepicin").src=imgsrc,tempe.innerText="--",cond.innerText="Error"}let apiKey,api;function weatherDetails(inf){const{description:description,id:id,main:main}=inf.weather[0];let realTemp=inf.main.temp,ic_ced;tempe.innerText=Math.floor(realTemp),cond.innerText=main,ic_ced=id>=200&&id<=232?"thunderstorm":id>=300&&id<=321?"rain":id>=500&&id<=531?"rain":id>=600&&id<=622?"snow":id>=701&&id<=781?"haze":800==id?"clear":id>=801&&id<=804?"cloud":"undefined";let imgsrc=`https://baum21614-cdn.github.io/imges/weather/${ic_ced}.svg`;document.querySelector(".wepicin").src=imgsrc}navigator.geolocation.getCurrentPosition(handleSuccess,handleError)?(navigator.geolocation.getCurrentPosition(handleSuccess,handleError),fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${handleSuccess()[0]}&lon=${handleSuccess()[1]}&apiKey=ac8c9d0d9cc74099af43be90e05ca35a`).then(response=>response.json()).then(res=>{const userCity=res.features[0].properties.city}),fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${handleSuccess()[0]}&lon=${handleSuccess()[1]}&units=metric&appid=9f0be11654b16dc791d8283f8c542b1b`).then(response=>response.json()).then(result=>weatherDetails(result))):fetch("https://ip-api.com/json/").then(response=>response.json()).then(res=>{const userCity=res.city;locationData(res),fetch(`https://api.openweathermap.org/data/2.5/weather?q=${userCity}&units=metric&appid=9f0be11654b16dc791d8283f8c542b1b`).then(response=>response.json()).then(result=>weatherDetails(result))})}apiPull();
