const tempe=document.getElementById("cond"),cond=document.getElementById("condtd");function apiPull(reqCity){const handleSuccess=pos=>{lat=pos.coords.latitude,lon=pos.coords.longitude;const posArr=[lat,lon];return posArr},handleError=()=>{displayError()};function displayError(){let imgsrc="https://baum21614-cdn.github.io/imges/weather/undefined.svg";document.querySelector(".wepicin").src=imgsrc,tempe.innerText="--",cond.innerText="Error"}let apiKey,api;function weatherDetails(inf){console.log(inf);const{description:description,id:id,main:main}=inf.weather[0];let realTemp=inf.main.temp,ic_ced;tempe.innerText=Math.floor(realTemp),cond.innerText=main,800==id?ic_ced="clear":id>=200&&id<=232?ic_ced="storm":id>=600&&id<=622?ic_ced="snow":id>=701&&id<=781?ic_ced="haze":id>=801&&id<=804?ic_ced="cloud":id>=300&&id<=321&&(ic_ced="rain");let imgsrc=`https://baum21614-cdn.github.io/imges/weather/${ic_ced}.svg`;document.querySelector(".wepicin").src=imgsrc}navigator.geolocation.getCurrentPosition(handleSuccess,handleError)?(navigator.geolocation.getCurrentPosition(handleSuccess,handleError),fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${handleSuccess()[0]}&lon=${handleSuccess()[1]}&units=metric&appid=9f0be11654b16dc791d8283f8c542b1b`).then(response=>response.json()).then(result=>weatherDetails(result))):fetch("https://ipapi.co/json").then(response=>response.json()).then(res=>{const userCity=res.city;fetch(`https://api.openweathermap.org/data/2.5/weather?q=${userCity}&units=metric&appid=9f0be11654b16dc791d8283f8c542b1b`).then(response=>response.json()).then(result=>weatherDetails(result))})}apiPull();
