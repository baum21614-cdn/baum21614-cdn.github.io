const startBtn=document.getElementById("starttest"),speedSpan=document.getElementById("initspeed"),iDisplay=document.getElementById("mbps_st"),loader=document.querySelector(".testGO"),retryBtn=document.querySelector(".tryAgain");function testDownload(){iDisplay.classList.add("testing"),startBtn.classList.add("testing"),speedSpan.innerText="0.00",loader.classList.add("loading"),document.querySelector(".go_speedTest").classList.remove("retryav"),retryBtn.classList.remove("retryav");var imgLink="https://upload.wikimedia.org/wikipedia/commons/c/c4/Canada_Vancouver_West_End_False_Creek_Evening.jpg",fileSize=19803984,timeStart,timeEnd,downloadSrc=new Image,timeStart,imgCache="?baum21614_request_time="+(timeStart=(new Date).getTime());downloadSrc.src=imgLink+imgCache,downloadSrc.onload=()=>{document.querySelector(".go_speedTest").classList.add("retryav"),retryBtn.classList.add("retryav"),loader.classList.remove("loading");var timeDuration,bytesLoaded=158431872,totalSpeed=(158431872/(((timeEnd=(new Date).getTime())-timeStart)/1e3)/1024/1024).toFixed(2);let i=0,speedOut;const animate=()=>{i<totalSpeed?(speedSpan.innerText=i.toFixed(2),setTimeout(animate,20),i+=1.02):speedSpan.innerText=totalSpeed};animate(),speedSpan.innerText=totalSpeed}}startBtn.onclick=()=>{testDownload()},retryBtn.onclick=()=>{testDownload()};
